function ChartX(a,b){function f(a,b,c){a.beginPath();a.moveTo(b||0,c||0);a.lineTo(b+1||0,c||0);a.stroke();a.closePath()}function e(a,b,c,d,e){a.beginPath();a.moveTo(b||0,c||0);a.lineTo(d||0,e||0);a.stroke();a.closePath()}function d(a,c,d,e,f,g){var h=a.fillStyle;a.fillStyle=b.bgcolor;a.fillRect(c,d,e,f);a.fillStyle=h}var c=0;var g=document.getElementById(a+"div");if(!g){g=document.createElement("div");g.setAttribute("class","chartc");g.setAttribute("id",a+"div");var h=document.getElementById(b.container);h.appendChild(g);g.setAttribute("display","block")}if(b.title)g.innerHTML="<span>"+b.title+"</span><br />";if(b.onclick){g.onclick=b.onclick}g=document.getElementById(a+"div");var j=document.getElementById(a);if(!j){j=document.createElement("canvas");j.setAttribute("class","chart");j.setAttribute("id",a);g.appendChild(j);j.setAttribute("display","block");j.setAttribute("visibility","visible")}j.setAttribute("width",b.width);j.setAttribute("height",b.height);var k=j.getContext("2d");k.lineWidth=b.linewidth||1;this.showtable=b.showtable;d(k,0,0,b.width,b.height,b.bgcolor);var l=document.createElement("canvas");l.setAttribute("width",b.width*b.bufferfactor);l.setAttribute("height",b.height);var m=l.getContext("2d");m.lineWidth=b.linewidth||1;d(m,0,0,b.width*b.bufferfactor,b.height,b.bgcolor);if(b.grid){m.lineWidth=b.grid.linewidth||1;m.strokeStyle=b.grid.color;for(i=b.width/b.grid.hsegments;i<b.width*b.bufferfactor;i+=b.width/b.grid.hsegments){e(m,i,b.height,i,0)}for(i=b.height/b.grid.vsegments;i<b.height;i+=b.height/b.grid.vsegments){e(m,0,i,b.width*b.bufferfactor,i)}m.lineWidth=b.linewidth||1}var n=null;var o=0;this.draw=function(a){o++;var f=[];f.push('<span style="display: block; float: left; padding: 2px;">'+o+": </span>");if(c>b.width*b.bufferfactor-1){d(m,0,0,b.width*b.bufferfactor,b.height,b.bgcolor);if(b.grid){m.lineWidth=b.grid.linewidth||1;m.strokeStyle=b.grid.color;for(i=b.width/b.grid.hsegments;i<b.width*b.bufferfactor;i+=b.width/b.grid.hsegments){e(m,i,b.height,i,0)}for(i=b.height/b.grid.vsegments;i<b.height;i+=b.height/b.grid.vsegments){e(m,0,i,b.width*b.bufferfactor,i)}}m.drawImage(j,0,0,b.width,b.height);c=b.width}y1=b.height;b.series.forEach(function(d){m.lineWidth=b.linewidth||1;m.strokeStyle=d.color;var f=b.height/d.yscale;var g=a[d.name];if(d.cross){g+=d.cross}switch(d.type){case"line":if(n){var h=n[d.name];if(d.cross){h+=d.cross}e(m,c,y1-f*h,c+2,y1-f*g)}else{e(m,c,y1-f*g,c+2,y1-f*g)}break;case"stack":e(m,c,y1,c,y1-=f*g);break}});if(c>b.width-1){k.drawImage(l,b.width-c,0)}else{k.drawImage(l,0,0)}if(b.legend){if(!this.table){this.table=document.createElement("div");g.appendChild(this.table)}this.table.setAttribute("class","infoon");b.series.forEach(function(b){f.push('<span style="display: block; padding: 2px; float: left; text-align: right; color: '+b.color+"; color: "+b.txcolor+';">'+b.name+" (<strong>"+a[b.name].toFixed(2)+"</strong>)</span>")});this.table.innerHTML=f.join("")}else{if(this.table){this.table.setAttribute("class","infooff")}}c++;n=a}}
